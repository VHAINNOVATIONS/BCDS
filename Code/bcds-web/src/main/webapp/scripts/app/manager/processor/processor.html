<div class="row">
    <h2 class="text-center">Results</h2>
</div>

<div class="row v-spacer">
    <div id="exportable" class="table-responsive well">
        <table width="100%" class="table table-striped">
            <thead>
            <tr>
                <th></th>
                <th>File Number</th>
                <th>Veteran</th>
                <th>Success</th>
                <th>Failure</th>
                <th></th>
            </tr>
            </thead>
            <tbody ng-repeat="result in results">
            <tr>
                <td>
                    <button type="button" class="btn btn-xs btn-default" ng-click="toggleCollapse(result)">
                        <span class="glyphicon" ng-class="{'glyphicon-minus': !result.isCollapsed, 'glyphicon-plus': result.isCollapsed}"></span>
                    </button>
                </td>
                <td>{{result.file_number}}</td>
                <td>{{result.name}}</td>
                <td ng-class="{{result.success > 0 ? 'bg-success' : ''}}">{{result.success}} successful result(s)</td>
                <td ng-class="{{result.failure > 0 ? 'bg-danger' : ''}}">{{result.failure}} failed result(s)</td>
                <td>
                    <button type="button"
                            ng-click="download(result)"
                            class="btn btn-sm">
                        <span class="glyphicon glyphicon-download-alt"></span> Download Report
                    </button>
                </td>
            </tr>
            <tr uib-collapse="isCollapsed(result)" class="result{{result.file_number}}" ng-repeat="entry in result.output">
                <td></td>
                <td></td>
                <td></td>
                <td>{{entry.code}} - {{entry.description}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

